const geminiService = require('../services/geminiService.js');
const grokService = require('../services/grokService.js');

async function chat(req, res) {\n  console.log('AI_CHAT_REQUEST:', req.body);\n  const { model, message } = req.body;\n  \n  if (!model || !message) {\n    return res.status(400).json({ success: false, error: 'Missing required fields' });\n  }\n\n  if (!['gemini', 'grok'].includes(model)) {\n    return res.status(400).json({ success: false, error: 'Invalid model' });\n  }\n\n  try {\n    console.log(`AI_CHAT_START: model=${model}`);\n    \n    // Call AI service directly\n    let aiResult;\n    if (model === 'gemini') {\n      aiResult = await geminiService.chat(message);\n    } else {\n      aiResult = await grokService.chat(message);\n    }\n    \n    console.log('AI_SERVICE_RESULT:', aiResult);\n\n    if (!aiResult.success) {\n      return res.json({\n        success: false,\n        error: aiResult.error\n      });\n    }\n\n    res.json({\n      success: true,\n      reply: aiResult.reply\n    });\n\n  } catch (error) {\n    console.error(`AI_CHAT_ERROR:`, error);\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error'\n    });\n  }\n}\n\nmodule.exports = { chat };